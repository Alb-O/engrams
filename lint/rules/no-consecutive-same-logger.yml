id: no-consecutive-same-logger
language: typescript
severity: warning
message: "Consecutive logger calls should be consolidated into a single call."
note: |
  Back-to-back logger calls create visual noise with repeated icons/timestamps.
  Consolidate into a single call using newlines.
  
  Instead of:
    info("Line 1");
    info("Line 2");
    warn("Warning");
  
  Use:
    info("Line 1\nLine 2");
    warn("Warning");
  
  Or for different severities that should appear together:
    info("Line 1\nLine 2\nWarning: something");
  
  For empty line breaks, embed \n in the string rather than calling log("").
files:
  - src/cli/**/*.ts
utils:
  any-logger-stmt:
    any:
      - all:
          - kind: expression_statement
          - has:
              pattern: info($$$)
      - all:
          - kind: expression_statement
          - has:
              pattern: warn($$$)
      - all:
          - kind: expression_statement
          - has:
              pattern: fail($$$)
      - all:
          - kind: expression_statement
          - has:
              pattern: success($$$)
      - all:
          - kind: expression_statement
          - has:
              pattern: log($$$)
      - all:
          - kind: expression_statement
          - has:
              pattern: error($$$)
      - all:
          - kind: expression_statement
          - has:
              pattern: raw($$$)
rule:
  all:
    - matches: any-logger-stmt
    - follows:
        matches: any-logger-stmt
